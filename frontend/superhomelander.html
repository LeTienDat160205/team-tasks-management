<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>WorkHub Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --main-bg: #f4f6fb;
        --main-color: #222;
        --panel-bg: #fff;
        --accent: #2563eb;
        --border: #e5e7eb;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", Arial, sans-serif;
        background: var(--main-bg);
        color: var(--main-color);
        min-height: 100vh;
      }

      /* transitions */
      html,
      body,
      .dashboard-frame,
      .right-section,
      .sidebar-list,
      .main-scroll,
      .calendar-card,
      .icon-btn,
      .tab-btn,
      .notif-item,
      .search-pill,
      .mini-pill,
      .calendar-grid div,
      .btn {
        transition: background-color 0.18s ease, color 0.18s ease,
          border-color 0.18s ease, box-shadow 0.18s ease;
      }

      /* ===== DARK THEME (nhạt hơn, rõ hơn) ===== */
      :root[data-theme="dark"] {
        --main-bg: #0e1626; /* nền tổng – nhạt hơn */
        --main-color: #e9edf5; /* chữ */
        --panel-bg: #111b2e; /* panel/card – nhạt hơn */
        --accent: #66a3ff; /* xanh nhấn */
        --border: #20324f; /* viền */
      }
      :root[data-theme="dark"] .dashboard-frame {
        box-shadow: 0 8px 40px #00000055;
      }
      :root[data-theme="dark"] .icon-btn,
      :root[data-theme="dark"] .tab-btn {
        background: #13213a;
        border-color: #20324f;
        color: #e9edf5;
      }
      :root[data-theme="dark"] .tab-btn.active {
        border-color: #7aa2ff;
      }
      :root[data-theme="dark"] .search-pill,
      :root[data-theme="dark"] .mini-pill,
      :root[data-theme="dark"] .sidebar-list,
      :root[data-theme="dark"] .main-scroll,
      :root[data-theme="dark"] .right-section,
      :root[data-theme="dark"] .calendar-card,
      :root[data-theme="dark"] .notif-item {
        background: #13213a;
        border-color: #20324f;
      }

      /* FRAME */
      .dashboard-frame {
        margin: 18px auto;
        max-width: 1200px;
        min-height: 90vh;
        border: 2px solid var(--border);
        border-radius: 18px;
        background: var(--panel-bg);
        box-shadow: 0 6px 32px #2563eb11;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* HEADER */
      .dashboard-header {
        display: grid;
        grid-template-columns: 160px auto;
        gap: 12px;
        align-items: center;
        padding: 8px 12px;
        height: 64px;
        border-bottom: 1.5px solid var(--border);
        background: var(--panel-bg);
      }
      .logo-bar {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 140px;
      }
      .logo {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .logo svg {
        width: 38px;
        height: 38px;
        display: block;
      }
      .site-name {
        font-size: 1.2rem;
        font-weight: 800;
        color: var(--accent);
        letter-spacing: 1px;
      }

      .header-actions {
        justify-self: end;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .icon-btn {
        background: #fff;
        border: 1.5px solid var(--border);
        border-radius: 9px;
        cursor: pointer;
        padding: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 0;
      }
      .icon-btn:hover {
        box-shadow: 0 0 0 3px #2563eb22;
      }
      .icon-btn svg {
        width: 18px;
        height: 18px;
      }
      .user-account {
        display: flex;
        align-items: center;
        gap: 7px;
        cursor: pointer;
        font-weight: 600;
        margin-left: 6px;
      }
      .user-avatar {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #c7d2fe;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.95rem;
        color: #2563eb;
      }
      .actions-cluster {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* BODY */
      .dashboard-body {
        flex: 1;
        display: flex;
        min-height: 0;
      }

      /* SIDEBAR */
      .sidebar {
        width: 210px;
        border-right: 1.5px solid var(--border);
        background: var(--panel-bg);
        display: flex;
        flex-direction: column;
        padding: 14px 0 56px;
        position: relative;
      }
      .sidebar-section {
        margin-bottom: 18px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      .sidebar-section label {
        font-size: 1rem;
        color: #2563eb;
        font-weight: 600;
        margin: 0 0 6px 18px;
      }
      .sidebar-search {
        margin: 0 10px 10px 18px;
      }
      .mini-pill {
        height: 32px;
        border-radius: 16px;
        border: 1.5px solid var(--border);
        background: #f1f5ff;
        display: flex;
        align-items: center;
        padding: 0 12px;
        gap: 8px;
      }
      :root[data-theme="dark"] .mini-pill {
        background: #172743;
      }
      .mini-pill svg {
        width: 16px;
        height: 16px;
        opacity: 0.8;
      }
      .mini-pill input {
        border: 0;
        outline: 0;
        background: transparent;
        width: 100%;
        color: inherit;
      }
      .sidebar-list {
        flex: 1;
        overflow-y: auto;
        margin: 0 10px 0 18px;
        border-radius: 7px;
        border: 1px solid #e5e7eb;
        background: #f8fafc;
      }
      :root[data-theme="dark"] .sidebar-list {
        background: #12243f;
      }
      .sidebar-list::-webkit-scrollbar {
        width: 6px;
        background: #e5e7eb;
      }
      .sidebar-list::-webkit-scrollbar-thumb {
        background: #c7d2fe;
        border-radius: 6px;
      }
      .sidebar-plus {
        position: absolute;
        left: 14px;
        right: 14px;
        bottom: 12px;
        height: 44px;
        border-radius: 10px;
        border: 1.5px solid var(--border);
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 26px;
        color: #2563eb;
        cursor: pointer;
        box-shadow: 0 2px 8px #00000010;
      }
      :root[data-theme="dark"] .sidebar-plus {
        background: #13213a;
        color: #7aa2ff;
      }

      /* MAIN */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 14px 0 0;
        min-width: 0;
      }
      .main-section {
        margin-bottom: 10px;
      }
      .main-section label {
        font-size: 1rem;
        color: #2563eb;
        font-weight: 600;
        margin-left: 18px;
        margin-bottom: 6px;
        display: block;
      }
      .task-tabs {
        display: flex;
        gap: 10px;
        align-items: center;
        margin: 0 18px 10px;
      }
      .tab-btn {
        padding: 8px 14px;
        border: 2px solid #cbd5e1;
        border-radius: 8px;
        background: #fff;
        font-weight: 700;
        cursor: pointer;
      }
      .tab-btn.active {
        border-color: #111827;
        box-shadow: 0 1px 0 #00000015;
      }
      :root[data-theme="dark"] .tab-btn {
        border-color: #20324f;
      }
      :root[data-theme="dark"] .tab-btn.active {
        border-color: #7aa2ff;
      }

      .main-search {
        margin: 0 18px 10px;
        display: flex;
        align-items: center;
      }
      .search-pill {
        width: 100%;
        height: 40px;
        border-radius: 18px;
        border: 1.5px solid var(--border);
        background: #f1f5ff;
        display: flex;
        align-items: center;
        padding: 0 14px;
        gap: 10px;
        box-shadow: inset 0 1px 0 #ffffff, 0 1px 0 #eef2ff;
      }
      :root[data-theme="dark"] .search-pill {
        background: #172743;
        border-color: #20324f;
        box-shadow: none;
      }
      .search-pill svg {
        width: 18px;
        height: 18px;
        opacity: 0.9;
      }
      .search-pill input {
        width: 100%;
        border: 0;
        outline: 0;
        background: transparent;
        font-size: 1rem;
        color: inherit;
      }

      .main-scroll {
        flex: 1;
        overflow-y: auto;
        margin: 0 18px;
        border-radius: 7px;
        border: 1px solid #e5e7eb;
        background: #f8fafc;
      }
      :root[data-theme="dark"] .main-scroll {
        background: #12243f;
        border-color: #20324f;
      }

      /* RIGHT PANEL */
      .right-panel {
        width: 260px;
        border-left: 1.5px solid var(--border);
        background: var(--panel-bg);
        display: flex;
        flex-direction: column;
        padding: 14px 0 0;
      }
      .right-section {
        margin: 0 14px 18px;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        background: #f8fafc;
        flex: 1;
        min-height: 120px;
        overflow-y: auto;
      }
      :root[data-theme="dark"] .right-section {
        background: #12243f;
        border-color: #20324f;
      }
      .right-section + .right-section {
        margin-top: 0;
      }
      .right-section::-webkit-scrollbar {
        width: 6px;
        background: #e5e7eb;
      }
      .right-section::-webkit-scrollbar-thumb {
        background: #c7d2fe;
        border-radius: 6px;
      }

      /* Calendar card */
      .calendar-card {
        background: #fff;
        border-radius: 10px;
        overflow: hidden;
      }
      :root[data-theme="dark"] .calendar-card {
        background: #13213a;
      }
      .calendar-head {
        padding: 10px 12px;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #f8fafc;
      }
      :root[data-theme="dark"] .calendar-head {
        background: #12243f;
        border-color: #20324f;
      }
      .calendar-title {
        font-weight: 800;
        color: inherit;
      }
      .calendar-sub {
        font-size: 12px;
        color: #6b7280;
      }
      :root[data-theme="dark"] .calendar-sub {
        color: #cbd5e1;
      } /* rõ hơn khi dark */
      .btn {
        padding: 6px 10px;
        border-radius: 10px;
        border: 1.6px solid var(--border);
        background: #fff;
        cursor: pointer;
      }
      :root[data-theme="dark"] .btn {
        background: #162a49;
        border-color: #2a4167;
        color: #e9edf5;
      }
      .btn:hover {
        box-shadow: 0 0 0 3px #2563eb22;
      }
      :root[data-theme="dark"] .btn:hover {
        box-shadow: 0 0 0 3px #6aa0ff22;
      }

      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 6px;
        padding: 10px;
      }
      .calendar-grid .dow {
        height: 26px;
        border: 0;
        background: transparent;
        font-weight: 700;
        color: #64748b;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      :root[data-theme="dark"] .calendar-grid .dow {
        color: #b6c2d4;
      }
      .calendar-grid .cell {
        height: 34px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #eef2f7;
        background: #f9fafb;
        color: #0f172a;
        font-size: 0.92rem;
      }
      :root[data-theme="dark"] .calendar-grid .cell {
        background: #162a49;
        border-color: #2a4167;
        color: #e8ecf6;
      }
      .calendar-grid .cell.faded {
        opacity: 0.55;
      }
      :root[data-theme="dark"] .calendar-grid .cell.faded {
        opacity: 0.75;
      } /* vẫn nhìn rõ */
      .calendar-grid .cell.today {
        outline: 2px solid var(--accent);
        outline-offset: -2px;
        font-weight: 700;
      }

      /* Notifications */
      .notif-list {
        padding: 10px;
      }
      .notif-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border: 1.5px solid #e5e7eb;
        background: #fff;
        border-radius: 10px;
        margin-bottom: 10px;
      }
      :root[data-theme="dark"] .notif-item {
        border-color: #20324f;
      }
      .notif-dot {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        border: 2px solid #cbd5e1;
        background: #fff;
      }
      :root[data-theme="dark"] .notif-dot {
        background: #162a49;
        border-color: #2a4167;
      }
      .notif-text {
        flex: 1;
        font-weight: 600;
      }

      /* MODAL PROFILE */
      .overlay {
        position: fixed;
        inset: 0;
        background: #0008;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 50;
      }
      .overlay.show {
        display: flex;
      }
      .modal-card {
        width: 500px;
        max-width: calc(100vw - 24px);
        background: #fff;
        border-radius: 16px;
        border: 1.5px solid var(--border);
        box-shadow: 0 20px 60px #0003;
        overflow: hidden;
      }
      :root[data-theme="dark"] .modal-card {
        background: #13213a;
        border-color: #20324f;
      }
      .modal-head {
        padding: 10px 14px;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #f8fafc;
      }
      :root[data-theme="dark"] .modal-head {
        background: #12243f;
        border-color: #20324f;
      }
      .modal-head h3 {
        margin: 0;
        font-size: 1rem;
        font-weight: 700;
      }
      .close-x {
        background: transparent;
        border: 0;
        font-size: 20px;
        cursor: pointer;
        opacity: 0.8;
        color: inherit;
      }
      .modal-body {
        padding: 14px;
      }
      .profile-pic {
        width: 90px;
        height: 90px;
        border-radius: 10px;
        border: 1px dashed #cbd5e1;
        background: #f1f5f9;
        margin: 0 auto 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
        font-weight: 700;
      }
      :root[data-theme="dark"] .profile-pic {
        background: #172743;
        border-color: #2a4167;
        color: #9fb0c9;
      }
      .caption {
        text-align: center;
        font-size: 0.9rem;
        margin-bottom: 8px;
        opacity: 0.9;
      }
      .form-row {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 10px;
      }
      .form-row label {
        font-size: 0.9rem;
        opacity: 0.9;
      }
      .form-row input,
      .form-row select {
        width: 100%;
        padding: 9px 12px;
        border-radius: 8px;
        border: 1.5px solid var(--border);
        background: #f4f6fb;
        font-size: 0.95rem;
      }
      :root[data-theme="dark"] .form-row input,
      :root[data-theme="dark"] .form-row select {
        background: #172743;
        border-color: #20324f;
        color: inherit;
      }

      @media (max-width: 1100px) {
        .dashboard-frame {
          max-width: 100vw;
        }
        .sidebar {
          width: 150px;
        }
        .right-panel {
          width: 210px;
        }
      }
      @media (max-width: 800px) {
        .sidebar,
        .right-panel {
          display: none;
        }
        .dashboard-frame {
          max-width: 100vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard-frame">
      <!-- HEADER -->
      <div class="dashboard-header">
        <div class="logo-bar">
          <div class="logo" aria-hidden="true">
            <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="gCircle" cx="30%" cy="20%" r="80%">
                  <stop offset="0%" stop-color="#3b82f6" />
                  <stop offset="100%" stop-color="#1d4ed8" />
                </radialGradient>
                <linearGradient id="gW" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#93c5fd" />
                  <stop offset="100%" stop-color="#60a5fa" />
                </linearGradient>
              </defs>
              <circle cx="24" cy="24" r="22" fill="url(#gCircle)" />
              <circle
                cx="24"
                cy="24"
                r="22"
                fill="none"
                stroke="#94a3b8"
                stroke-width="2"
                opacity=".55"
              />
              <path
                d="M10 15 L16 33 L24 20 L32 33 L38 15"
                fill="none"
                stroke="url(#gW)"
                stroke-width="4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <span class="site-name">WorkHub</span>
        </div>

        <div class="header-actions actions-cluster">
          <button class="icon-btn" title="Menu">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" />
              <line x1="3" y1="12" x2="21" y2="12" stroke-width="2" />
              <line x1="3" y1="18" x2="21" y2="18" stroke-width="2" />
            </svg>
          </button>
          <button class="icon-btn" id="btnTheme" title="Dark mode">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                stroke-width="2"
              />
            </svg>
          </button>
          <button class="icon-btn" id="btnJumpCalendar" title="Calendar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect
                x="3"
                y="4"
                width="18"
                height="18"
                rx="2"
                ry="2"
                stroke-width="2"
              ></rect>
              <line x1="16" y1="2" x2="16" y2="6" stroke-width="2"></line>
              <line x1="8" y1="2" x2="8" y2="6" stroke-width="2"></line>
              <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"></line>
            </svg>
          </button>
          <button class="icon-btn" title="Thông báo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path
                d="M18 8a6 6 0 10-12 0c0 7-3 9-3 9h18s-3-2-3-9"
                stroke-width="2"
              ></path>
              <path d="M13.73 21a2 2 0 01-3.46 0" stroke-width="2"></path>
            </svg>
          </button>
          <div class="user-account" id="openProfile" title="Account">
            <div class="user-avatar">A</div>
            <span>ACCOUNT</span>
          </div>
        </div>
      </div>

      <!-- BODY -->
      <div class="dashboard-body">
        <!-- SIDEBAR -->
        <div class="sidebar">
          <div class="sidebar-section">
            <label>Section</label>
            <div class="sidebar-search">
              <div class="mini-pill">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="11" cy="11" r="7" stroke-width="2"></circle>
                  <line
                    x1="21"
                    y1="21"
                    x2="16.65"
                    y2="16.65"
                    stroke-width="2"
                  ></line>
                </svg>
                <input type="text" placeholder="Search" />
              </div>
            </div>
            <div class="sidebar-list"></div>
          </div>
          <button class="sidebar-plus" title="Thêm">+</button>
        </div>

        <!-- MAIN -->
        <div class="main-content">
          <div class="main-section">
            <label>Section</label>
            <div class="task-tabs">
              <button class="tab-btn active">Đã giao</button>
              <button class="tab-btn">Được giao</button>
            </div>
            <div class="main-search">
              <div class="search-pill">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="11" cy="11" r="7" stroke-width="2"></circle>
                  <line
                    x1="21"
                    y1="21"
                    x2="16.65"
                    y2="16.65"
                    stroke-width="2"
                  ></line>
                </svg>
                <input type="text" placeholder="Search" />
              </div>
            </div>
          </div>
          <div class="main-scroll"></div>
        </div>

        <!-- RIGHT -->
        <div class="right-panel">
          <!-- Calendar block -->
          <div class="right-section">
            <div class="calendar-card" id="calendarCard">
              <div class="calendar-head">
                <div>
                  <div class="calendar-title" id="titleDay">Mon, Sep 29</div>
                  <div class="calendar-sub" id="subMonth">SEPTEMBER 2025</div>
                </div>
                <div>
                  <button class="btn" id="prevMth">◀</button>
                  <button class="btn" id="nextMth">▶</button>
                </div>
              </div>
              <div class="calendar-grid" id="calGrid"></div>
              <!-- Đã xóa CANCEL / OK theo yêu cầu -->
            </div>
          </div>

          <!-- Notifications block -->
          <div class="right-section">
            <div class="notif-list" id="notifList">
              <div class="notif-item">
                <div class="notif-dot"></div>
                <div class="notif-text">Nội dung thông báo</div>
              </div>
              <div class="notif-item">
                <div class="notif-dot"></div>
                <div class="notif-text">Nội dung thông báo</div>
              </div>
              <div class="notif-item">
                <div class="notif-dot"></div>
                <div class="notif-text">Nội dung thông báo</div>
              </div>
              <div class="notif-item">
                <div class="notif-dot"></div>
                <div class="notif-text">Nội dung thông báo</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL PROFILE -->
    <div class="overlay" id="profileOverlay" aria-hidden="true">
      <div
        class="modal-card"
        role="dialog"
        aria-modal="true"
        aria-labelledby="profileTitle"
      >
        <div class="modal-head">
          <h3 id="profileTitle">Thông tin tài khoản</h3>
          <button class="close-x" id="closeProfile" aria-label="Đóng">×</button>
        </div>
        <div class="modal-body">
          <div class="profile-pic">Avatar</div>
          <div class="caption">Tên người dùng</div>
          <div class="form-row">
            <label>Tên tài khoản</label
            ><input type="text" placeholder="Nhập tên tài khoản" />
          </div>
          <div class="form-row">
            <label>Email</label
            ><input type="email" placeholder="name@example.com" />
          </div>
          <div class="form-row">
            <label>Nghề nghiệp</label
            ><input type="text" placeholder="Nhập nghề nghiệp" />
          </div>
          <div class="form-row">
            <label>Số điện thoại</label
            ><input type="tel" placeholder="0987xxxxxx" />
          </div>
          <div class="form-row">
            <label>Quê quán</label
            ><input type="text" placeholder="Tỉnh/Thành phố" />
          </div>
          <div class="form-row">
            <label>Giới tính</label>
            <select>
              <option value="">Chọn...</option>
              <option>Nam</option>
              <option>Nữ</option>
              <option>Khác</option>
            </select>
          </div>
          <div class="form-row">
            <label>Ngày sinh</label><input type="date" />
          </div>
          <div class="modal-actions">
            <button class="btn" id="cancelProfile">Huỷ</button
            ><button class="btn primary">Lưu</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* PROFILE MODAL */
      const overlay = document.getElementById("profileOverlay");
      const openProfile = document.getElementById("openProfile");
      const closeEls = [
        document.getElementById("closeProfile"),
        document.getElementById("cancelProfile"),
      ];
      openProfile.addEventListener("click", () => {
        overlay.classList.add("show");
        overlay.setAttribute("aria-hidden", "false");
      });
      closeEls.forEach((el) => el.addEventListener("click", closeModal));
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) closeModal();
      });
      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });
      function closeModal() {
        overlay.classList.remove("show");
        overlay.setAttribute("aria-hidden", "true");
      }

      /* CALENDAR */
      const calGrid = document.getElementById("calGrid");
      const titleDay = document.getElementById("titleDay");
      const subMonth = document.getElementById("subMonth");
      const prevMth = document.getElementById("prevMth");
      const nextMth = document.getElementById("nextMth");
      const btnJumpCalendar = document.getElementById("btnJumpCalendar");
      const calendarCard = document.getElementById("calendarCard");

      let view = new Date();
      function headText(d) {
        const w = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][d.getDay()];
        const m = [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ][d.getMonth()];
        return `${w}, ${m} ${String(d.getDate()).padStart(2, "0")}`;
      }
      function buildCalendar(date) {
        const y = date.getFullYear(),
          m = date.getMonth();
        titleDay.textContent = headText(new Date());
        subMonth.textContent = new Intl.DateTimeFormat("en-US", {
          month: "long",
          year: "numeric",
        })
          .format(new Date(y, m, 1))
          .toUpperCase();

        const first = new Date(y, m, 1);
        const start = (first.getDay() + 6) % 7; // Monday first
        const days = new Date(y, m + 1, 0).getDate();
        const prevDays = new Date(y, m, 0).getDate();

        const parts = [];
        // DOW header
        ["M", "T", "W", "T", "F", "S", "S"].forEach((d) =>
          parts.push(`<div class="dow">${d}</div>`)
        );
        // 42 day cells
        for (let i = 0; i < 42; i++) {
          let label,
            cls = "cell";
          if (i < start) {
            label = prevDays - start + i + 1;
            cls += " faded";
          } else if (i < start + days) {
            label = i - start + 1;
          } else {
            label = i - (start + days) + 1;
            cls += " faded";
          }
          // today ring
          const today = new Date();
          if (
            y === today.getFullYear() &&
            m === today.getMonth() &&
            label === today.getDate() &&
            !cls.includes("faded")
          ) {
            cls += " today";
          }
          parts.push(`<div class="${cls}">${label}</div>`);
        }
        calGrid.innerHTML = parts.join("");
      }
      prevMth.addEventListener("click", () => {
        view.setMonth(view.getMonth() - 1);
        buildCalendar(view);
      });
      nextMth.addEventListener("click", () => {
        view.setMonth(view.getMonth() + 1);
        buildCalendar(view);
      });
      btnJumpCalendar.addEventListener("click", () => {
        calendarCard.scrollIntoView({ behavior: "smooth", block: "nearest" });
      });
      buildCalendar(view);

      // Tabs
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".tab-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
        });
      });

      /* DARK MODE TOGGLE */
      const THEME_KEY = "workhub-theme";
      const themeBtn = document.getElementById("btnTheme");
      function getPreferredTheme() {
        const saved = localStorage.getItem(THEME_KEY);
        if (saved === "light" || saved === "dark") return saved;
        return window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      }
      function applyTheme(t) {
        document.documentElement.setAttribute("data-theme", t);
        themeBtn.title = t === "dark" ? "Light mode" : "Dark mode";
        themeBtn.setAttribute("aria-pressed", t === "dark");
      }
      function toggleTheme() {
        const current =
          document.documentElement.getAttribute("data-theme") || "light";
        const next = current === "dark" ? "light" : "dark";
        localStorage.setItem(THEME_KEY, next);
        applyTheme(next);
      }
      applyTheme(getPreferredTheme());
      themeBtn.addEventListener("click", toggleTheme);
    </script>
  </body>
</html>
